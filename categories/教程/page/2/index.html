<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>分类: 教程 - Ran&#039;s Blog | 旋律的博客</title><link rel="manifest" href="/Blog/manifest.json"><meta name="application-name" content="Ran&#039;s Blog | 旋律的博客"><meta name="msapplication-TileImage" content="https://johnsonran.cn/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Ran&#039;s Blog | 旋律的博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Ran&#039;s Blog | 旋律的博客"><meta property="og:url" content="https://johnsonran.github.io/Blog"><meta property="og:site_name" content="Ran&#039;s Blog | 旋律的博客"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://q1.qlogo.cn/g?b=qq&amp;nk=3546870850&amp;s=640"><meta property="article:author" content="JohnsonRan"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://q1.qlogo.cn/g?b=qq&amp;nk=3546870850&amp;s=640"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://johnsonran.github.io/Blog"},"headline":"Ran's Blog | 旋律的博客","image":["https://johnsonran.github.io/Blog/img/og_image.png"],"author":{"@type":"Person","name":"Ran Johnson"},"description":""}</script><link rel="icon" href="https://johnsonran.cn/favicon.ico"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/Blog/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/Blog/js/globalUtils.js"></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="/Blog/live2d/waifu.css"><script type="text/javascript" async src="/Blog/live2d/autoload.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/Blog/"><img src="https://johnsonran.cn/favicon.ico" alt="Ran&#039;s Blog | 旋律的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/Blog/">Home</a><a class="navbar-item" href="/Blog/archives">Archives</a><a class="navbar-item" href="/Blog/categories">Categories</a><a class="navbar-item" href="/Blog/tags">Tags</a><a class="navbar-item" href="/Blog/about">About</a><a class="navbar-item" href="/Blog/album">Album</a><a class="navbar-item" href="/Blog/friend">Friend</a><a class="navbar-item" href="/Blog/message">Message</a><a class="navbar-item" href="/Blog/self-talking">Self-talking</a><a class="navbar-item" href="/Blog/music">Music</a><a class="navbar-item" href="/Blog/media">Media</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Join Gitter" href="https://gitter.im/hexo-theme-amazing/community"><i class="fab fa-gitter"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/Blog/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/Blog/categories">分类</a></li><li class="is-active"><a href="#" aria-current="page">教程</a></li></ul></nav></div></div><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-04-21  <a class="commentCountImg" href="/Blog/2020/04/21/Linux%E4%B8%8B%E7%9A%84TCP%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E2%80%94%E2%80%94TCPING%E7%9A%84%E7%AE%80%E6%98%8E%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/#comment-container"><span class="display-none-class">bf328548e999deddb489fa107d24d5d3</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="bf328548e999deddb489fa107d24d5d3">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>3 分钟  <i class="fas fa-pencil-alt"> </i>0.5 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Blog/2020/04/21/Linux%E4%B8%8B%E7%9A%84TCP%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E2%80%94%E2%80%94TCPING%E7%9A%84%E7%AE%80%E6%98%8E%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">Linux下的TCP测试工具——TCPING的简明使用教程</a></h1><div class="content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>PING是一种网络工具，用来测试数据包能否通过ICMP协议到到达目标主机，程序会按时间和成功响应的次数估算丢失数据包率。但是相较于ICMP协议，TCP则更为广泛的被大家熟知和使用。下面我们介绍一种新型的网络测试工具——TCPING。</p>
<p>TCPING是基于TCP协议的一种PING命令，用来测试数据包能否通过TCP协议到到达目标主机（其实就是抄上面的描述）。他又一大特点，就是可以监听某个端口的状态，在禁PING的时候，也可以检测网络连通率。闲话少说，开始教程:</p>
<blockquote>
<p>前提条件:<br>操作系统:CentOS6+/Debian7+/Ubuntu12+</p>
</blockquote>
<h2 id="开始操作"><a href="#开始操作" class="headerlink" title="开始操作"></a>开始操作</h2><ol>
<li>先更新系统软件源:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum update -y</span><br><span class="line">#CentOS系统</span><br><span class="line">apt-get update -y</span><br><span class="line">#Debian&#x2F;Ubuntu系统</span><br></pre></td></tr></table></figure></li>
<li>安装依赖，这里用到的是tcptraceroute和bc<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install -y tcptraceroute bc</span><br><span class="line">#CentOS系统</span><br><span class="line">apt-get install -y tcptraceroute bc</span><br><span class="line">#Debian&#x2F;Ubuntu系统</span><br></pre></td></tr></table></figure></li>
<li>安装TCPING</li>
</ol>
<ul>
<li>切换目录到/usr/bin:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;bin</span><br></pre></td></tr></table></figure></li>
<li>下载TCPING:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O tcping http:&#x2F;&#x2F;www.vdberg.org&#x2F;~richard&#x2F;tcpping</span><br></pre></td></tr></table></figure></li>
<li>赋予文件执行权限:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x tcping</span><br></pre></td></tr></table></figure></li>
</ul>
<p>4.测试TCPING:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# tcping 8.8.8.8 53</span><br><span class="line"># 通过TCP-PING 8.8.8.8 端口 53 </span><br><span class="line">traceroute to 8.8.8.8 (8.8.8.8), 255 hops max, 60 byte packets</span><br><span class="line">seq 0: tcp response from google-public-dns-a.google.com (8.8.8.8) &lt;syn,ack&gt;  1.723 ms</span><br><span class="line">traceroute to 8.8.8.8 (8.8.8.8), 255 hops max, 60 byte packets</span><br><span class="line">seq 1: tcp response from google-public-dns-a.google.com (8.8.8.8) &lt;syn,ack&gt;  8.850 ms</span><br><span class="line">traceroute to 8.8.8.8 (8.8.8.8), 255 hops max, 60 byte packets</span><br></pre></td></tr></table></figure>

<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><p>用法详解:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 用法：tcpping [-d] [-c] [-C] [-w sec] [-q num] [-x count] ipaddress [port]</span><br><span class="line"># -d 在每个响应时间前，打印时间戳</span><br><span class="line"># -c 以列表形式显示</span><br><span class="line"># -C 输出类似于fping工具中-C选项的结果</span><br><span class="line"># -w 等待时间（默认 3）</span><br><span class="line"># -r 每N秒重试一次（默认 1）</span><br><span class="line"># -x 限定测试总时长 (默认 无限)</span><br><span class="line"># 实例：测试服务器到大陆TCP是否畅通</span><br><span class="line"># 在这里，我们要用到百度官网的IP：119.75.217.109 以及他的TCP端口：80</span><br></pre></td></tr></table></figure>

<hr>
<p>教程就到此结束啦!<br>本博客文章均为原创，转载请注明来源</p>
<hr>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/Blog/categories/%E6%95%99%E7%A8%8B/">教程</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/Blog/tags/%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/">扫描工具</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-04-21  <a class="commentCountImg" href="/Blog/2020/04/21/%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7IPerf3%E7%9A%84%E4%BD%BF%E7%94%A8/#comment-container"><span class="display-none-class">f4f57b75df4934a10a5dad7d6fb978e8</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="f4f57b75df4934a10a5dad7d6fb978e8">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>5 分钟  <i class="fas fa-pencil-alt"> </i>0.7 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Blog/2020/04/21/%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7IPerf3%E7%9A%84%E4%BD%BF%E7%94%A8/">网络性能测试工具IPerf3的使用</a></h1><div class="content"><blockquote>
<p>iPerf3 is a tool for active measurements of the maximum achievable bandwidth on IP networks. It supports tuning of various parameters related to timing, buffers and protocols (TCP, UDP, SCTP with IPv4 and IPv6). For each test it reports the bandwidth, loss, and other parameters. This is a new implementation that shares no code with the original iPerf and also is not backwards compatible. iPerf was orginally developed by <a target="_blank" rel="noopener" href="https://iperf.fr/contact.php#authors">NLANR/DAST</a>. iPerf3 is principally developed by <a target="_blank" rel="noopener" href="https://www.es.net/">ESnet</a> / <a target="_blank" rel="noopener" href="https://www.lbl.gov/">Lawrence Berkeley National Laboratory</a>. It is released under a three-clause <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/BSD_licenses">BSD license.</a></p>
</blockquote>
<p>以下内容来自Google Translate:  </p>
<blockquote>
<p>iPerf3是用于主动测量IP网络上可达到的最大带宽的工具。 它支持与时序，缓冲区和协议（TCP，UDP，带有IPv4和IPv6的SCTP）相关的各种参数的调整。 对于每个测试，它都会报告带宽，损耗和其他参数。 这是一个新的实现，与原始iPerf不共享任何代码，并且也不向后兼容。 iPerf最初是由NLANR / DAST开发的。 iPerf3主要由ESnet / Lawrence Berkeley国家实验室开发。 它以三条款BSD许可发布。</p>
</blockquote>
<p>Linux版本下载地址：<a target="_blank" rel="noopener" href="http://code.google.com/p/iperf/downloads/list">http://code.google.com/p/iperf/downloads/list</a></p>
<h2 id="下载IPerf3"><a href="#下载IPerf3" class="headerlink" title="下载IPerf3"></a>下载IPerf3</h2><p>大家可以从<a target="_blank" rel="noopener" href="https://iperf.fr/">IPerf</a>官网下载Windows版IPerf，而安卓版则可以从<a target="_blank" rel="noopener" href="https://play.google.com/store/apps/details?id=com.nextdoordeveloper.miperf.miperf">Google Play</a>下载<br>或者从我给各位大佬提供的站点下载：<a target="_blank" rel="noopener" href="https://img.johnsonran.cn/IPerf3/IPerf3%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7.zip">Windows版</a> <a target="_blank" rel="noopener" href="https://img.johnsonran.cn/IPerf3/iperf.apk">安卓版</a></p>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><h4 id="PC端"><a href="#PC端" class="headerlink" title="PC端"></a>PC端</h4><p>如果大佬您是从我提供的站点下载的话，那么您可以直接解压压缩包所有文件并运行相对应的批处理文件辣！<br>例如您像让您的电脑作为客户端，则运行<code>IPerf3客户端.bat</code>，反之，如果想让您的电脑作为服务端，则运行<code>IPerf3服务端.bat</code><br>关于PC的运行教程就到这里，下面来介绍安卓端的运行</p>
<h4 id="Android端"><a href="#Android端" class="headerlink" title="Android端"></a>Android端</h4><p>同PC端差不多，如果你想让你的Android手机作为客户端，安装您下载的<code>iperf.apk</code>，并打开，输入<code>-c (你的服务端IP地址) -i (每次报告的间隔)) </code>点击<code>Stopped</code>运行即可!<br>像这样:  <img src="https://img.johnsonran.cn/IPerf3/c.png" alt="c">  </p>
<p>我这里PC端IP为<code>10.0.0.120</code>，报告间隔为<code>1s</code></p>
<hr>
<p>如果想成为服务端，则输入<code>-s -i 1</code>点击<code>Stopped</code>运行即可!<br>像这样:  <img src="https://img.johnsonran.cn/IPerf3/s.png" alt="c"><br>意思为，将手机设为<code>服务端</code>报告间隔为<code>1s</code></p>
<h2 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h2><p>太多了懒得写自己去看<a target="_blank" rel="noopener" href="https://iperf.fr/iperf-doc.php">Wiki</a>别让我写求求你了好吗</p>
<hr>
<p>教程就到此结束啦!<br>本博客文章均为原创，转载请注明来源</p>
<hr>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/Blog/categories/%E6%95%99%E7%A8%8B/">教程</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/Blog/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/">测试工具</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-04-21  <a class="commentCountImg" href="/Blog/2020/04/21/Flarum,-%E4%B8%80%E4%B8%AA%E8%BD%BB%E9%87%8F%E5%8C%96%E6%96%B0%E5%85%B4%E7%9A%84%E5%BC%80%E6%BA%90%E8%AE%BA%E5%9D%9B%E6%BA%90%E7%A0%81/#comment-container"><span class="display-none-class">9f27911cbeff2c43449f2db505723788</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="9f27911cbeff2c43449f2db505723788">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>7 分钟  <i class="fas fa-pencil-alt"> </i>1.1 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Blog/2020/04/21/Flarum,-%E4%B8%80%E4%B8%AA%E8%BD%BB%E9%87%8F%E5%8C%96%E6%96%B0%E5%85%B4%E7%9A%84%E5%BC%80%E6%BA%90%E8%AE%BA%E5%9D%9B%E6%BA%90%E7%A0%81/">Flarum, 一个轻量化新兴的开源论坛源码</a></h1><div class="content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>说起开源论坛程序，我们都会想到国内两大巨头：Discuz 和 phpwind。一个拥抱腾讯一个拥抱阿里，实力确实不容小视。当然他们本身确实也是做得很强大，不仅仅是论坛，还可以用来做 CMS，企业网站等等。大家都知道虎嗅网一开始也是用的 Discuz！（还有宝塔面板）</p>
<p>所以，程序强大了，也就使得程序本身变得越来越臃肿，对于那些只想单纯做一个论坛的用户来说，很显然这些臃肿的程序已经不适合他们了。于是我们开始寻找国内外的一些其他替代品，轻论坛产品。</p>
<p>国内目前的一些轻论坛产品，像 Xiunobbs，Startbbs 等等，体验下来，总感觉差点意思。</p>
<h1 id="Flarum"><a href="#Flarum" class="headerlink" title="Flarum"></a>Flarum</h1><p>上个月，一次偶让的机会在网上看到国外一个新兴的开源社区程序 ——Flarum。<br>Flarum 是一款现代的，优雅的，简洁的，强大的论坛软件。Flarum 让在线交流变得更加轻松愉快。虽然现在他只是 Beta 版（已更新到 beta12），但是相信在未来一定会退出正式 版本！(听说开发<br>者走了一个)<br>不过这个开发者的理由有点扯淡<br><a target="_blank" rel="noopener" href="https://flarum.org/story/">Why We’re Building Flarum</a><br>Flarum 官网并不支持中文，国内衍生了不少 Flarum 中文网，这里推荐两个主要的<br>1.<a target="_blank" rel="noopener" href="https://www.flarum.org.cn/">Flarum 中文站：优雅简洁的轻论坛</a> 这个主要是讲官方的代码，主要基于官方的教程翻译而来<br>2.<a target="_blank" rel="noopener" href="https://www.flarumchina.org/">FlarumChina</a> 这个网站主要是基于官方代码进行本土化，二次打包，进行发布，对于新手支持较好<br>这里我个人比较推荐 Flarumchina，他的网站和软件都是同步官方更新的，挺不错。<br>他们的论坛 <a target="_blank" rel="noopener" href="https://flarum.atowerlight.cn/">TowerLight Community</a></p>
<h1 id="安装教程"><a href="#安装教程" class="headerlink" title="安装教程"></a>安装教程</h1><p>虚拟机安装可以看 <a target="_blank" rel="noopener" href="https://gitee.com/FlarumChina/flarum">Gitee releases</a> 或者 <a target="_blank" rel="noopener" href="https://github.com/skywalker512/FlarumChina/releases/tag/v0.1.0-beta.12">Github releases</a>，下载压缩包  </p>
<p>下面是内置 nginx 和 fpm 的 docker 镜像，据维护者说，在稳定下来之后将会有更多选项，目前代码在<a target="_blank" rel="noopener" href="https://gitee.com/FlarumChina/flarum">此处</a></p>
<p>以下是环境变量参考:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">DEBUG&#x3D;false</span><br><span class="line">FORUM_URL&#x3D;http:&#x2F;&#x2F;xxx</span><br><span class="line"></span><br><span class="line">#FlarumChina 特殊的可以使用 cdn 来加速静态资源，若不使用，请与 FORUM_URL 相同</span><br><span class="line">FORUM_CDN &#x3D; xx </span><br><span class="line"></span><br><span class="line">DB_HOST&#x3D;xx</span><br><span class="line">DB_NAME&#x3D;xx</span><br><span class="line">DB_USER&#x3D;xx</span><br><span class="line">DB_PASS&#x3D;xx</span><br><span class="line">DB_PREF&#x3D;xx</span><br><span class="line">DB_PORT&#x3D;3306</span><br><span class="line"></span><br><span class="line">FLARUM_ADMIN_USER&#x3D;admin</span><br><span class="line">FLARUM_ADMIN_PASS&#x3D;xxx</span><br><span class="line">FLARUM_ADMIN_MAIL&#x3D;xxx@xxx.com</span><br><span class="line">FLARUM_TITLE&#x3D;xxx</span><br></pre></td></tr></table></figure>
<h1 id="宝塔面板安装"><a href="#宝塔面板安装" class="headerlink" title="宝塔面板安装"></a>宝塔面板安装</h1><h4 id="安装面板"><a href="#安装面板" class="headerlink" title="安装面板"></a>安装面板</h4><p>请访问<a target="_blank" rel="noopener" href="https://bt.cn/download/linux.html">面板信息</a>以获取安装信息。<br>据博主发文前，最新版为 v0.1.0-beta.12 <a target="_blank" rel="noopener" href="https://gitee.com/FlarumChina/FlarumChina/attach_files/350061/download">点击前往下载</a></p>
<h4 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h4><p><img src="https://img.johnsonran.cn/Flarum/1.png" alt="envshow"><br>此处 Nginx，PHP，Mysql 是必须的，切记。  </p>
<h4 id="安装-PHP-插件"><a href="#安装-PHP-插件" class="headerlink" title="安装 PHP 插件"></a>安装 PHP 插件</h4><p><img src="https://img.johnsonran.cn/Flarum/2.png" alt="phpplug"><br><img src="https://img.johnsonran.cn/Flarum/3.png" alt="phpplugshow"></p>
<h4 id="网站配置伪静态"><a href="#网站配置伪静态" class="headerlink" title="网站配置伪静态"></a>网站配置伪静态</h4><p><img src="https://img.johnsonran.cn/Flarum/4.png" alt="fakestatic"><br>可以填入这个:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  try_files $uri $uri/ /index.php?$query_string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然最好全部填入:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  try_files $uri $uri/ /index.php?$query_string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location = /sitemap.xml &#123; </span><br><span class="line">  try_files $uri $uri/ /index.php?$query_string; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~* \.(?:manifest|appcache|html?|xml|json)$ &#123;</span><br><span class="line">  add_header Cache-Control <span class="string">&quot;max-age=0&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~* \.(?:rss|atom)$ &#123;</span><br><span class="line">  add_header Cache-Control <span class="string">&quot;max-age=3600&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~* \.(?:jpg|jpeg|gif|png|ico|cur|gz|svg|mp4|ogg|ogv|webm|htc)$ &#123;</span><br><span class="line">  add_header Cache-Control <span class="string">&quot;max-age=2592000&quot;</span>;</span><br><span class="line">  access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~* \.(?:css|js)$ &#123;</span><br><span class="line">  add_header Cache-Control <span class="string">&quot;max-age=31536000&quot;</span>;</span><br><span class="line">  access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~* \.(?:ttf|ttc|otf|eot|woff|woff2)$ &#123;</span><br><span class="line">  add_header Cache-Control <span class="string">&quot;max-age=2592000&quot;</span>;</span><br><span class="line">  access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">gzip on;</span><br><span class="line">gzip_comp_level <span class="number">5</span>;</span><br><span class="line">gzip_min_length <span class="number">256</span>;</span><br><span class="line">gzip_proxied any;</span><br><span class="line">gzip_vary on;</span><br><span class="line">gzip_types</span><br><span class="line">    application/atom+xml</span><br><span class="line">    application/javascript</span><br><span class="line">    application/json</span><br><span class="line">    application/ld+json</span><br><span class="line">    application/manifest+json</span><br><span class="line">    application/rss+xml</span><br><span class="line">    application/vnd.geo+json</span><br><span class="line">    application/vnd.ms-fontobject</span><br><span class="line">    application/x-font-ttf</span><br><span class="line">    application/x-web-app-manifest+json</span><br><span class="line">    application/xhtml+xml</span><br><span class="line">    application/xml</span><br><span class="line">    font/opentype</span><br><span class="line">    image/bmp</span><br><span class="line">    image/svg+xml</span><br><span class="line">    image/x-icon</span><br><span class="line">    text/cache-manifest</span><br><span class="line">    text/css</span><br><span class="line">    text/plain</span><br><span class="line">    text/vcard</span><br><span class="line">    text/vnd.rim.location.xloc</span><br><span class="line">    text/vtt</span><br><span class="line">    text/x-component</span><br><span class="line">    text/x-cross-domain-policy;</span><br></pre></td></tr></table></figure>
<h4 id="设置运行目录"><a href="#设置运行目录" class="headerlink" title="设置运行目录"></a>设置运行目录</h4><p>要确保网站根目录结构如下  </p>
<ul>
<li>Apache 请开启 mod_rewrite 并将网站根目录设置到 /path/to/flarum/public</li>
<li>Nginx 进行设置 并将网站根目录设置到 /path/to/flarum/public</li>
</ul>
<p>   接下来访问网站，进行设置，就可以了</p>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/Blog/categories/%E6%95%99%E7%A8%8B/">教程</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/Blog/tags/%E6%BA%90%E7%A0%81/">源码</a></div><hr></div></article></div><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-04-21  <a class="commentCountImg" href="/Blog/2020/04/21/%E4%BD%BF%E7%94%A8-wget-%E4%B8%8B%E8%BD%BD%E4%B8%80%E4%B8%AA%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6/#comment-container"><span class="display-none-class">d7744d855da7be18b6510fbbbea413ba</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="d7744d855da7be18b6510fbbbea413ba">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>1 分钟  <i class="fas fa-pencil-alt"> </i>0.2 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Blog/2020/04/21/%E4%BD%BF%E7%94%A8-wget-%E4%B8%8B%E8%BD%BD%E4%B8%80%E4%B8%AA%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6/">使用 wget 下载一个目录下的所有文件</a></h1><div class="content"><p><strong>今天想要下载清华源上的<code>Termux</code>源到本地，使用<code>wget</code>却只是下载了一个index.html</strong><br><strong>于是我就参考资料，写此博客以记录</strong><br>方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -r -np -nH -R index.html* -e robots&#x3D;off https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;termux&#x2F;</span><br></pre></td></tr></table></figure>
<ul>
<li>各个参数的含义：</li>
</ul>
<blockquote>
<p>-r : 遍历所有子目录<br>-np : 不到上一层子目录去<br>-nH : 不要将文件保存到主机名文件夹<br>-R index.html : 不下载所有匹配到包含 <code>index.html</code> 的文件<br>-e robots=off : 绕过网站的robots.txt下载文件</p>
</blockquote>
<ul>
<li>效果如下：<br><img src="https://img.johnsonran.cn/DL-Site/wget.png" alt="wget"></li>
</ul>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/Blog/categories/%E6%95%99%E7%A8%8B/">教程</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/Blog/tags/%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/">下载工具</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-04-21  <a class="commentCountImg" href="/Blog/2020/04/21/%E5%A6%82%E4%BD%95%E7%BC%96%E8%AF%91NEWIFI3%E5%9B%BA%E4%BB%B6-Padavan(%E8%80%81%E6%AF%9B%E5%AD%90)/#comment-container"><span class="display-none-class">70e4cbcfcb09a8b6bbe5f9b9c930910f</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="70e4cbcfcb09a8b6bbe5f9b9c930910f">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>3 分钟  <i class="fas fa-pencil-alt"> </i>0.5 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Blog/2020/04/21/%E5%A6%82%E4%BD%95%E7%BC%96%E8%AF%91NEWIFI3%E5%9B%BA%E4%BB%B6-Padavan(%E8%80%81%E6%AF%9B%E5%AD%90)/">如何编译NEWIFI3固件-Padavan(老毛子)</a></h1><div class="content"><h1 id="编译前的准备工作"><a href="#编译前的准备工作" class="headerlink" title="编译前的准备工作"></a>编译前的准备工作</h1><p><del>你需要一台Linux平台的系统，这里使用<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/debian/">Debian10</a></del> 这不是废话吗！<br>首先从Github下载你想编译的固件仓库并进入，这里使用ChongshengB的固件:<a target="_blank" rel="noopener" href="https://github.com/chongshengB/rt-n56u">链接</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/chongshengB/rt-n56u.git /opt/rt-n56u-n3</span><br><span class="line"><span class="built_in">cd</span> /opt/rt-n56u-n3</span><br></pre></td></tr></table></figure>

<ul>
<li><p>安装依赖包:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install unzip libtool-bin curl cmake gperf gawk flex bison nano xxd sudo nano screen \</span><br><span class="line">cpio git python-docutils gettext automake autopoint texinfo build-essential help2man \</span><br><span class="line">pkg-config zlib1g-dev libgmp3-dev libmpc-dev libmpfr-dev libncurses5-dev libltdl-dev gcc-multilib</span><br></pre></td></tr></table></figure>
</li>
<li><p>准备工具链</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/rt-n56u-n3/toolchain-mipsel</span><br><span class="line"><span class="comment"># 可以从源码编译工具链，这需要一些时间：</span></span><br><span class="line">./clean_toolchain</span><br><span class="line">./build_toolchain</span><br><span class="line"><span class="comment">#或者下载预编译的工具链：</span></span><br><span class="line">mkdir -p toolchain-3.4.x</span><br><span class="line">wget https://github.com/hanwckf/padavan-toolchain/releases/download/v1.1/mipsel-linux-uclibc.tar.xz</span><br><span class="line">tar -xvf mipsel-linux-uclibc.tar.xz -C toolchain-3.4.x</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="选择你需要的插件"><a href="#选择你需要的插件" class="headerlink" title="选择你需要的插件"></a>选择你需要的插件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> trunk</span><br><span class="line">nano build_firmware_modify</span><br></pre></td></tr></table></figure>

<p>执行后会出现如下界面:<br><img src="https://img.johnsonran.cn/CompliePadavan/PlugSetup.png" alt="PlugSetup"><br>如果你想使用Adbyby plus++可将下图的<code>n</code>改为<code>y</code><br><img src="https://img.johnsonran.cn/CompliePadavan/eg.png" alt="eg"><br>其他配置同上!  </p>
<ul>
<li>修改机型文件:  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /opt/rt-n56u/trunk/configs/templates/PSG1218.config</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="开始编译"><a href="#开始编译" class="headerlink" title="开始编译"></a>开始编译</h1><ul>
<li><p>修改你的固件编译时间:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano versions.inc</span><br></pre></td></tr></table></figure>
</li>
<li><p>清理代码树并开始编译</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/rt-n56u/trunk</span><br><span class="line">sudo ./clear_tree</span><br><span class="line">sudo ./build_firmware_modify NEWIFI3</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>如果觉得编译时间是在太长，不想干等着，可在编译之前执行:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -S padavan</span><br></pre></td></tr></table></figure>

<p>执行完后，可按下<code>Ctrl</code>+<code>A</code>+<code>D</code>退出该会话，恢复会话则使用:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -r padavan</span><br></pre></td></tr></table></figure>

<p>编译完成后,执行<code>cd images</code>看到你所编译的固件<br><img src="https://img.johnsonran.cn/CompliePadavan/compshow.png" alt="compshow"><br>如想下载该固件，可以使用<code>Python</code>自带的软件包<code>SimpleHTTPServer</code>搭建文件浏览器来下载:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m SimpleHTTPServer</span><br></pre></td></tr></table></figure>

<p><img src="https://img.johnsonran.cn/CompliePadavan/httpserver.png" alt="httpserver"></p>
<hr>
<p>教程就到此结束啦!<br>本博客文章均为原创，转载请注明来源</p>
<hr>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/Blog/categories/%E6%95%99%E7%A8%8B/">教程</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/Blog/tags/%E6%95%99%E7%A8%8B/">教程</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/Blog/tags/%E7%BC%96%E8%AF%91/">编译</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-04-21  <a class="commentCountImg" href="/Blog/2020/04/21/%E8%B7%AF%E7%94%B1%E5%99%A8%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CloudFlare%E7%9A%84DDNS/#comment-container"><span class="display-none-class">c5df80ee35046eba218b74e6d1e4590b</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="c5df80ee35046eba218b74e6d1e4590b">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>8 分钟  <i class="fas fa-pencil-alt"> </i>1.2 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Blog/2020/04/21/%E8%B7%AF%E7%94%B1%E5%99%A8%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CloudFlare%E7%9A%84DDNS/">路由器中如何使用CloudFlare的DDNS</a></h1><div class="content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>动态 DNS（英语：Dynamic DNS，简称 DDNS）是域名系统（DNS）中的一种自动更新名称服务器（Name server）内容的技术。根据互联网的域名订立规则，域名必须跟从固定的IP地址。但动态DNS系统为动态网域提供一个固定的名称服务器（Name server），通过即时更新，使外界用户能够连上动态用户的网址。摘自 维基百科-动态DNS</p>
<p>当你需要使用你的域名指向一个动态 ip 时，就需要有一个支持动态 dns 的域名托管商。<br>CloudFlare 是非常有名的域名托管商和 CDN 提供商，提供高质量的免费服务，拥有国内外大量用户。本文就将讲解如何使用 CloudFlare 实现 DDNS (动态域名解析)</p>
<h2 id="开始操作"><a href="#开始操作" class="headerlink" title="开始操作"></a>开始操作</h2><p><code>CloudFlare</code> 提供有非常强大的 <code>API</code> ，具体可以参看 <a target="_blank" rel="noopener" href="https://api.cloudflare.com/#zone-properties">Cloudflare API documentation v4</a><br>为了实现 DDNS ，需要使 <code>A记录指向的 IP 的能够动态变化</code>，我们这里利用 <code>API</code> 进行定时操作</p>
<h2 id="获取帐号信息"><a href="#获取帐号信息" class="headerlink" title="获取帐号信息"></a>获取帐号信息</h2><p>首先要 <code>获取你的 CloudFlare 帐号的相关信息</code>：</p>
<ol>
<li>邮箱<br>就是你注册 CloudFlare 时使用的邮箱</li>
<li>Zone_ID<br>这个位于你的域名设置右边的 <code>API</code> 分类下的 <code>Zone ID</code> 可直接复制下来以备使用<br><img src="https://img.johnsonran.cn/CF-DDNS/1.png" alt="cfzoneid"></li>
<li>API_Key<br>找到 <code>Zone_ID</code> 之后，点击下面的<code>获取您的API令牌</code> 进入页面后，点击API密钥栏 <code>Global API Key</code> 后面的 <code>查看</code> 即可获取<br><img src="https://img.johnsonran.cn/CF-DDNS/2.png" alt="cfapikey"></li>
</ol>
<h2 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h2><h4 id="创建DNS-Record"><a href="#创建DNS-Record" class="headerlink" title="创建DNS Record"></a>创建DNS Record</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST <span class="string">&quot;https://api.cloudflare.com/client/v4/zones/8ee1be75cxxxx(你的Zone_ID)/dns_records&quot;</span> \</span><br><span class="line">    -H <span class="string">&quot;X-Auth-Email: xxxx(你的帐号的邮箱)&quot;</span> \</span><br><span class="line">    -H <span class="string">&quot;X-Auth-Key: 123456bdxxxx(你的Api_Key)&quot;</span> \</span><br><span class="line">    -H <span class="string">&quot;Content-Type: application/json&quot;</span> \</span><br><span class="line">    --data <span class="string">&#x27;&#123;&quot;type&quot;:&quot;A&quot;,&quot;name&quot;:&quot;example.com（指定要创建记录的域名）&quot;,&quot;content&quot;:&quot;127.0.0.1(指定A记录指向的IP)&quot;,&quot;ttl&quot;:120（指定TTL）,&quot;proxied&quot;:false&#125;&#x27;</span></span><br><span class="line"><span class="comment">#返回结果</span></span><br><span class="line">&#123;<span class="string">&quot;result&quot;</span>:&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;123456xxxx(这条创建的DNS记录的ID)&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;A&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;eg.example.com（创建记录的域名）&quot;</span>,<span class="string">&quot;content&quot;</span>:<span class="string">&quot;127.0.0.1(A记录指向的IP)&quot;</span>,<span class="string">&quot;proxiable&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;proxied&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;ttl&quot;</span>:120,<span class="string">&quot;locked&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;zone_id&quot;</span>:<span class="string">&quot;123456cxxxx(你的Zone_ID)&quot;</span>,<span class="string">&quot;zone_name&quot;</span>:<span class="string">&quot;example.com&quot;</span>,<span class="string">&quot;modified_on&quot;</span>:<span class="string">&quot;2020-04-12T16:38:18.430924Z&quot;</span>,<span class="string">&quot;created_on&quot;</span>:<span class="string">&quot;2020-04-12T16:38:18.430924Z&quot;</span>,<span class="string">&quot;meta&quot;</span>:&#123;<span class="string">&quot;auto_added&quot;</span>:<span class="literal">false</span>&#125;&#125;,<span class="string">&quot;success&quot;</span>:<span class="literal">true</span>（指命令执行成功）,<span class="string">&quot;errors&quot;</span>:[],<span class="string">&quot;messages&quot;</span>:[]&#125;</span><br></pre></td></tr></table></figure>
<h4 id="查看-DNS-Record-列表"><a href="#查看-DNS-Record-列表" class="headerlink" title="查看 DNS Record 列表"></a>查看 DNS Record 列表</h4><p>执行下面这个命令后，Shell 窗口中会列出你的帐号上的所有 <code>DNS</code> 记录（不仅仅是A记录）<br>在 <code>CloudFlare</code> ，每一条解析记录都有对应的一个固定的 <code>ID</code><br>为了能够通过 <code>API</code> 修改解析记录，我们需要通过此步骤来获取这个 <code>ID</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET <span class="string">&quot;https://api.cloudflare.com/client/v4/zones/8ee1be75cxxxx(你的Zone_ID)/dns_records&quot;</span> \</span><br><span class="line">    -H <span class="string">&quot;X-Auth-Email: xxxx(你的帐号的邮箱)&quot;</span> \</span><br><span class="line">    -H <span class="string">&quot;X-Auth-Key: 123456bdxxxx(你的Api_Key)&quot;</span> \</span><br><span class="line">    -H <span class="string">&quot;Content-Type: application/json&quot;</span></span><br><span class="line"><span class="comment">#返回结果</span></span><br><span class="line">&#123;<span class="string">&quot;result&quot;</span>:[&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;1234aca56xxxx(这条被查看记录的ID)&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;A&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;eg.example.com（域名）&quot;</span>,<span class="string">&quot;content&quot;</span>:<span class="string">&quot;xx.xx.xx.xx(A记录指向的IP)&quot;</span>,<span class="string">&quot;proxiable&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;proxied&quot;</span>:<span class="literal">true</span>（启用cloudflare反代与否的状态值）,<span class="string">&quot;ttl&quot;</span>:1（1 表示自动TTL）,<span class="string">&quot;locked&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;zone_id&quot;</span>:<span class="string">&quot;8ee1be75cxxxx(我的zone_id)&quot;</span>,<span class="string">&quot;zone_name&quot;</span>:<span class="string">&quot;example.com（根域名）&quot;</span>,<span class="string">&quot;modified_on&quot;</span>:<span class="string">&quot;2020-04-12T15:24:00.567936Z&quot;</span>,<span class="string">&quot;created_on&quot;</span>:<span class="string">&quot;2020-04-12T15:24:00.567936Z&quot;</span>,<span class="string">&quot;meta&quot;</span>:&#123;<span class="string">&quot;auto_added&quot;</span>:<span class="literal">false</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>其中的 <code>&quot;id&quot;:&quot;1234aca56xxxx&quot;</code> 就是你需要的 DNS 记录的 <code>ID</code></p>
<h2 id="使脚本自动获取你的IP并让CloudFlare解析"><a href="#使脚本自动获取你的IP并让CloudFlare解析" class="headerlink" title="使脚本自动获取你的IP并让CloudFlare解析"></a>使脚本自动获取你的IP并让CloudFlare解析</h2><p>当获取到了需要的一切,可按照以下编辑你的<code>.sh</code>脚本:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ipl=$(ifconfig (你拨号设备的名称，可通过ifconfig查看) | awk <span class="string">&#x27;/inet addr/&#123;print substr($2,6)&#125;&#x27;</span>) <span class="comment">#获取你设备所使用的IP</span></span><br><span class="line">ip=$(curl -s http://ipv4.icanhazip.com)</span><br><span class="line">curl -k -X PUT <span class="string">&quot;https://api.cloudflare.com/client/v4/zones/(你的Zone_ID)/dns_records/(这条被查看记录的ID)&quot;</span> \</span><br><span class="line">         -H <span class="string">&quot;X-Auth-Email: xxxx(你的帐号的邮箱)&quot;</span> \</span><br><span class="line">         -H <span class="string">&quot;X-Auth-Key: 123456bdxxxx(你的Api_Key)&quot;</span> \</span><br><span class="line">         -H <span class="string">&quot;Content-Type: application/json&quot;</span> \</span><br><span class="line">         --data <span class="string">&#x27;&#123;&quot;type&quot;:&quot;A&quot;,&quot;name&quot;:&quot;你想使用的域名&quot;,&quot;content&quot;:&quot;&#x27;</span><span class="variable">$&#123;ipl&#125;</span><span class="string">&#x27;&quot;,&quot;ttl&quot;:120,&quot;proxied&quot;:false&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>为了方便了解该脚本的执行时间，以及CloudFlare所获取的IP,可自行测试以下命令(虽然我写的看起来像个笨比):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ipl=$(ifconfig ppp0 | awk <span class="string">&#x27;/inet addr/&#123;print substr($2,6)&#125;&#x27;</span>) &amp;&amp; bash (PATH_TO_SCRIPT) &amp;&amp; <span class="built_in">echo</span> `date +<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>` Done <span class="variable">$ipl</span> &gt;&gt; /tmp/ddns.txt</span><br></pre></td></tr></table></figure>
<p>执行完后，即可使用 <code>tail -f /tmp/ddns.txt</code> 查看是否执行完成</p>
<p>如果想让脚本在某时段运行，具体可参照<a target="_blank" rel="noopener" href="https://wangchujiang.com/linux-command/c/crontab.html">此处</a><br>下面展示我配置的crontab：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 * * * <span class="built_in">export</span> ipl=$(ifconfig ppp0 | awk <span class="string">&#x27;/inet addr/&#123;print substr($2,6)&#125;&#x27;</span>) &amp;&amp; bash /media/AiDisk_a1/ddns.sh &amp;&amp; <span class="built_in">echo</span> `date +<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>` Done <span class="variable">$ipl</span> &gt;&gt; /tmp/ddns.txt</span><br></pre></td></tr></table></figure>
<p>该crontab表示每天零点自动执行脚本</p>
<hr>
<p>教程就到此结束啦!<br>本博客文章均为原创，转载请注明来源</p>
<hr>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/Blog/categories/%E6%95%99%E7%A8%8B/">教程</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/Blog/tags/CloudFlare/">CloudFlare</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/Blog/tags/%E6%95%99%E7%A8%8B/">教程</a></div><hr></div></article></div><!--!--><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/Blog/categories/%E6%95%99%E7%A8%8B/">上一页</a></div><div class="pagination-next is-invisible is-hidden-mobile"><a href="/Blog/categories/%E6%95%99%E7%A8%8B/page/3/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/Blog/categories/%E6%95%99%E7%A8%8B/">1</a></li><li><a class="pagination-link is-current" href="/Blog/categories/%E6%95%99%E7%A8%8B/page/2/">2</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://q1.qlogo.cn/g?b=qq&amp;nk=3546870850&amp;s=640" alt="Ran&#039;s Blog | 旋律的博客"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Ran&#039;s Blog | 旋律的博客</p><p class="is-size-6 is-block">我永远喜欢莲华.</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/Blog/archives"><p class="title">41</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/Blog/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/Blog/tags"><p class="title">48</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/JohnsonRan" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/JohnsonRan"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/BetterCallCiri"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:admin@johnsonran.cn"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Next" href="https://johsonran.github.io/Blog"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/Blog/atom.xml"><i class="fas fa-rss"></i></a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"来源《"+data.from+"》</p><p>提供者-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget"><div class="card-content"><h3 class="menu-label">最新评论</h3><span class="body_hot_comment">加载中，最新评论有1分钟缓存...</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-19T13:25:00.000Z">2020-10-19</time></p><p class="title"><a href="/Blog/2020/10/19/UpgradeAll---%E7%94%A8%E4%B8%80%E6%AC%BE%E8%BD%AF%E4%BB%B6%EF%BC%8C%E6%A3%80%E6%9F%A5%E6%89%80%E6%9C%89%E5%BA%94%E7%94%A8%E6%9B%B4%E6%96%B0/">UpgradeAll - 用一款软件，检查所有应用更新</a></p><p class="categories"><a href="/Blog/categories/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/">实用工具</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-19T12:04:00.000Z">2020-10-19</time></p><p class="title"><a href="/Blog/2020/10/19/%E8%BF%99%E5%B0%B1%E6%98%AF%E5%A4%AA%E5%88%80%E4%BE%A0%E7%9A%84%E9%AD%85%E5%8A%9B%E5%90%97%EF%BC%8Ci%E4%BA%86i%E4%BA%86/">这就是太刀侠的魅力吗，i了i了</a></p><p class="categories"><a href="/Blog/categories/%E6%B8%B8%E6%88%8F/">游戏</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-19T12:00:53.000Z">2020-10-19</time></p><p class="title"><a href="/Blog/2020/10/19/%E7%BA%AA%E5%BF%B5%E6%88%91%E7%8E%A9Monster-Hunter%EF%BC%9AWorld%E5%B7%B2%E7%BB%8F200%E5%B0%8F%E6%97%B6%E5%95%A6/">纪念我玩Monster Hunter：World已经200小时啦</a></p><p class="categories"><a href="/Blog/categories/%E6%B8%B8%E6%88%8F/">游戏</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-19T00:02:00.000Z">2020-10-19</time></p><p class="title"><a href="/Blog/2020/10/19/%E4%B8%BATypecho%E5%8D%9A%E5%AE%A2%E5%8A%A0%E9%80%9F%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8Redis%E5%8F%8ATpCache%E7%BC%93%E5%AD%98%E6%8F%92%E4%BB%B6%E4%B8%BA%E7%BD%91%E7%AB%99%E5%8A%A0%E9%80%9F/">为Typecho博客加速——使用Redis及TpCache缓存插件为网站加速</a></p><p class="categories"><a href="/Blog/categories/%E5%B9%B2%E8%B4%A7/">干货</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-09-15T11:49:00.000Z">2020-09-15</time></p><p class="title"><a href="/Blog/2020/09/15/%E4%BD%BF%E7%94%A8Metasploit%E8%BF%9C%E6%8E%A7%E4%BD%A0%E7%9A%84%E6%89%8B%E6%9C%BA/">使用Metasploit远控你的手机</a></p><p class="categories"><a href="/Blog/categories/%E5%B9%B2%E8%B4%A7/">干货</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/Blog/categories/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">实用工具</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/Blog/categories/%E5%B9%B2%E8%B4%A7/"><span class="level-start"><span class="level-item">干货</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile is-marginless" href="/Blog/categories/%E6%95%99%E7%A8%8B/"><span class="level-start"><span class="level-item">教程</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile is-marginless" href="/Blog/categories/%E6%B8%B8%E6%88%8F/"><span class="level-start"><span class="level-item">游戏</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/Blog/categories/%E7%90%90%E4%BA%8B/"><span class="level-start"><span class="level-item">琐事</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/Blog/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/Blog/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/Blog/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/Blog/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/Blog/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><a class="level is-mobile is-marginless" href="/Blog/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/Blog/tags/CloudFlare/"><span class="tag">CloudFlare</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/CDN/"><span class="tag">CDN</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/"><span class="tag">扫描工具</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/Github/"><span class="tag">Github</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/OneDrive/"><span class="tag">OneDrive</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/%E8%BF%9C%E6%8E%A7/"><span class="tag">远控</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/Windows/"><span class="tag">Windows</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/Typecho/"><span class="tag">Typecho</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/Metasploit/"><span class="tag">Metasploit</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/"><span class="tag">下载工具</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/Javascript/"><span class="tag">Javascript</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/%E6%95%99%E7%A8%8B/"><span class="tag">教程</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/object-Object/"><span class="tag">[object Object]</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/hosts/"><span class="tag">hosts</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/UpgradeAll/"><span class="tag">UpgradeAll</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/Docker/"><span class="tag">Docker</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/P2P/"><span class="tag">P2P</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/PE%E5%B7%A5%E5%85%B7/"><span class="tag">PE工具</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/RaiDrive/"><span class="tag">RaiDrive</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/Blog/tags/Redis/"><span class="tag">Redis</span><span class="tag is-grey-lightest">1</span></a></div></div><div class="field is-grouped is-grouped-multiline"><a class="tags has-addons" href="/Blog/tags/"><span class="tag">查看全部&gt;&gt;</span></a></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><!--!--></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/Blog/"><img src="https://johnsonran.cn/favicon.ico" alt="Ran&#039;s Blog | 旋律的博客" height="28"></a><p class="size-small"><span>&copy; 2020 Ran Johnson</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> &amp; <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">Amazing</a> <br><span>© <a href="http://www.beian.miit.gov.cn/" target="_blank">皖ICP备20006542号</a><br></span><span>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br />&nbsp;&nbsp;&nbsp;&nbsp;方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2020/4/21 00:00:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/Blog/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="2364053447" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/Blog/js/column.js"></script><script src="/Blog/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/Blog/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/Blog/js/main.js" defer></script><script>$.getScript('/Blog/js/comment-issue-data.js',function(){loadIssueData('46a9f3481b46ea0129d8','79c7c9cb847e141757d7864453bcbf89f0655b24','removeif','blog_comment',false);})</script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/Blog/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/Blog/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(true){
                $.getScript('/Blog/js/comment-issue-data.js',function(){loadIssueData('46a9f3481b46ea0129d8','79c7c9cb847e141757d7864453bcbf89f0655b24','removeif','blog_comment',false);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>